import asyncio
from thumbor.loaders.http_loader import load as http_loader
from urllib.parse import urljoin

def load(context, url):
    """
    Extended HTTP loader that prefixes the URL with a fixed base URL.
    """

    # Ensure the URL is properly joined with the fixed base
    full_url = urljoin(context.config.TC_HTTP_LOADER_PREFIX, url)

    # Call the default HTTP loader with the modified URL
    return http_loader(context, full_url)
